# /etc/portage/make.conf

CFLAGS="-march=x86-64-v3 -mtune=znver1 -O2 -pipe -flto"
CXXFLAGS="${CFLAGS}"
FCFLAGS="${CFLAGS}"
FFLAGS="${CFLAGS}"

# Link Time Optimization (LTO)
LDFLAGS="-Wl,-O1 -Wl,--as-needed"

# Accept keyworded versions for newer ROCm/CUDA support
ACCEPT_KEYWORDS="~amd64"

# Parallel build
MAKEOPTS="-j$(nproc)"

# Default system-wide USE flags
USE="X wayland dbus udev elogind policykit systemd
     amd gpu vulkan opengl opencl rocm hip
     nvidia cuda intel nvidia-drivers 
     video_cards_amdgpu video_cards_nvidia video_cards_intel
     llvm clang lto zstd zlib
     threads multilib openmp
     python readline unicode bash-completion"

# ROCm target (optional if using ROCm toolchain directly)
ROCM_TARGETS="gfx900 gfx906 gfx908 gfx90a gfx1010 gfx1030 gfx1100"

# CUDA settings
CUDA_TARGETS="nvcc"

# LLVM targets for Clang/ROCm/HIP
LLVM_TARGETS="AMDGPU NVPTX X86"
