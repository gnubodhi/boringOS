# /etc/portage/make.conf

CFLAGS="-march=x86-64-v3 -mtune=znver1 -O2 -pipe -flto"
CXXFLAGS="${CFLAGS}"
FCFLAGS="${CFLAGS}"
FFLAGS="${CFLAGS}"

# Link Time Optimization (LTO)
LDFLAGS="-Wl,-O1 -Wl,--as-needed"

# Accept keyworded versions for newer ROCm/CUDA support
ACCEPT_KEYWORDS="~amd64"

# Parallel build
MAKEOPTS="-j$(nproc)"

# Default system-wide USE flags
USE="X a52 aac alsa amd amf apparmor avif bluray bash-completion bluetooth
     cddb clang codec2 compat cuda cups dav1d dbus dist-kernel dts dvd dvb
     egl elogind exif faad ffmpeg flac flatpak gdk-pixbuf gif gles2 gnome
     gsf gtk gtk4 hip intel jack jack-sdk jpeg jpeg2k jpegxl
     lame libass libaom llvm lto mad matroska modules-sign mp3 mpeg multilib
     musepack nvidia nvidia-drivers nvenc ogg opencl opengl openh264
     openmp opus pipewire pipewire-alsa png policykit postproc pulseaudio
     qtmedia qsv rav1e readline rocm samba speex srt suid svg svt-av1 symlink
     systemd theora threads tiff twolame udisks udev unicode usb vaapi verify-sig
     video_cards_amdgpu video_cards_intel video_cards_nvidia vorbis vulkan vpx
     wavpack wayland webp x264 x265 xmp xvid zimg zlib zstd"

# ROCm target (optional if using ROCm toolchain directly)
ROCM_TARGETS="gfx900 gfx906 gfx908 gfx90a gfx1010 gfx1030 gfx1100"

# CUDA settings
CUDA_TARGETS="nvcc"

# LLVM targets for Clang/ROCm/HIP
LLVM_TARGETS="AMDGPU NVPTX X86"
